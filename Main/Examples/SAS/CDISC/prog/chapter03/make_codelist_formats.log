1                                         The SAS System           15:23 Friday, November 20, 2015

NOTE: Copyright (c) 2002-2012 by SAS Institute Inc., Cary, NC, USA. 
NOTE: SAS (r) Proprietary Software 9.4 (TS1M1) 
      Licensed to UNIVERSITY OF BIRMINGHAM, Site 51200421.
NOTE: This session is executing on the W32_8HOME  platform.



NOTE: Updated analytical products:
      
      SAS/STAT 13.1
      SAS/ETS 13.1
      SAS/OR 13.1
      SAS/IML 13.1
      SAS/QC 13.1

NOTE: Additional host information:

 W32_8HOME WIN 6.2.9200  Workstation

NOTE: SAS initialization used:
      real time           0.20 seconds
      cpu time            0.04 seconds
      
1          *---------------------------------------------------------------*;
2          * make_codelist_formats.sas creates a permanent SAS format library
3          * stored to the libref LIBRARY from the codelist metadata file
4          * CODELISTS.xlsx.  The permanent format library that is created
5          * contains formats that are named like this:
6          *   CODELISTNAME_SOURCEDATASET_SOURCEVARIABLE
7          * where CODELISTNAME is the name of the SDTM codelist,
8          * SOURCEDATASET is the name of the source SAS dataset and
9          * SOURCEVARIABLE is the name of the source SAS variable.
10         *---------------------------------------------------------------*;
11         %include '..\home\Examples\SAS\CDISC\prog\chapter03\common.sas';
19         
20         %common
NOTE: Libref SOURCE was successfully assigned as follows: 
      Engine:        V9 
      Physical Name: C:\Apache\htdocs\casper2\home\Examples\SAS\CDISC\prog\chapter03
NOTE: Libref LIBRARY refers to the same physical library as SOURCE.
NOTE: Libref LIBRARY was successfully assigned as follows: 
      Engine:        V9 
      Physical Name: C:\Apache\htdocs\casper2\home\Examples\SAS\CDISC\prog\chapter03
NOTE: Libref TARGET was successfully assigned as follows: 
      Engine:        V9 
      Physical Name: C:\Apache\htdocs\casper2\home\Examples\SAS\CDISC\sdtm
21         
22         proc import
23             datafile="..\home\Examples\SAS\CDISC\prog\appendix_b\SDTM_METADATA.xlsx"
24             out=formatdata
25             dbms=xlsx
26             replace;
27             sheet="CODELISTS";
2 The SAS System                                                                                                                                                                                                                 15:23 Friday, November 20, 2015

28         run;

NOTE: The import data set has 135 observations and 11 variables.
NOTE: WORK.FORMATDATA data set was successfully created.
NOTE: PROCEDURE IMPORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

29         
30         
31         ** make a proc format control dataset out of the SDTM metadata;
32         data source.formatdata;
33             set formatdata(drop=type);
34         
35         	where sourcedataset ne "" and sourcevalue ne "";
36         
37         	keep fmtname start end label type;
38         	length fmtname $ 32 start end $ 16 label $ 200 type $ 1;
39         
40         	fmtname = compress(codelistname || "_" || sourcedataset
41                           || "_" || sourcevariable);
42         	start = left(sourcevalue);
43         	end = left(sourcevalue);
44         	label = left(codedvalue);
45         	if upcase(sourcetype) = "NUMBER" then
46         	    type = "N";
47         	else if upcase(sourcetype) = "CHARACTER" then
48         	    type = "C";
49         run;

NOTE: There were 51 observations read from the data set WORK.FORMATDATA.
      WHERE (sourcedataset not = ' ') and (sourcevalue not = ' ');
NOTE: The data set SOURCE.FORMATDATA has 51 observations and 5 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
      

50         
51         ** create a SAS format library to be used in SDTM conversions;
52         proc format
53             library=library
54             cntlin=source.formatdata
55             fmtlib;
NOTE: Format ACN_ADVERSE_AEACTION has been written to LIBRARY.FORMATS.
NOTE: Format AEREL_ADVERSE_AEREL has been written to LIBRARY.FORMATS.
NOTE: Format AESEV_ADVERSE_AESEV has been written to LIBRARY.FORMATS.
NOTE: Format ARM_DEMOGRAPHIC_TRT has been written to LIBRARY.FORMATS.
NOTE: Format ARMCD_DEMOGRAPHIC_TRT has been written to LIBRARY.FORMATS.
NOTE: Format $LBCAT_LABS_LABCAT has been written to LIBRARY.FORMATS.
NOTE: Format $LBTEST_LABS_LABTEST has been written to LIBRARY.FORMATS.
NOTE: Format $LBTESTCD_LABS_LABTEST has been written to LIBRARY.FORMATS.
3 The SAS System                                                                                                                                                                                                                 15:23 Friday, November 20, 2015

NOTE: Format $NY_ADVERSE_SERIOUS has been written to LIBRARY.FORMATS.
NOTE: Format RACE_DEMOGRAPHIC_RACE has been written to LIBRARY.FORMATS.
NOTE: Format SEX_DEMOGRAPHIC_GENDER has been written to LIBRARY.FORMATS.
NOTE: Format $UNIT_LABS_COLUNITS has been written to LIBRARY.FORMATS.
NOTE: Format VISIT_LABS_MONTH has been written to LIBRARY.FORMATS.
56         run;

NOTE: PROCEDURE FORMAT used (Total process time):
      real time           0.07 seconds
      cpu time            0.00 seconds
      
NOTE: There were 51 observations read from the data set SOURCE.FORMATDATA.
NOTE: The PROCEDURE FORMAT printed pages 1-4.

57         

NOTE: SAS Institute Inc., SAS Campus Drive, Cary, NC USA 27513-2414
NOTE: The SAS System used:
      real time           0.36 seconds
      cpu time            0.07 seconds
      
