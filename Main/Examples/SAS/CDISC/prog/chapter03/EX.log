1                                         The SAS System            10:26 Sunday, December 6, 2015

NOTE: Copyright (c) 2002-2012 by SAS Institute Inc., Cary, NC, USA. 
NOTE: SAS (r) Proprietary Software 9.4 (TS1M1) 
      Licensed to UNIVERSITY OF BIRMINGHAM, Site 51200421.
NOTE: This session is executing on the W32_8HOME  platform.



NOTE: Updated analytical products:
      
      SAS/STAT 13.1
      SAS/ETS 13.1
      SAS/OR 13.1
      SAS/IML 13.1
      SAS/QC 13.1

NOTE: Additional host information:

 W32_8HOME WIN 6.2.9200  Workstation

NOTE: SAS initialization used:
      real time           0.25 seconds
      cpu time            0.07 seconds
      
1          x 'chdir "C:\Apache\htdocs\casper2\home\Examples\SAS\CDISC\prog\chapter03"'
1        !                                                                            ;
2          
3          *---------------------------------------------------------------*;
4          * EX.sas creates the SDTM EX dataset and saves it
5          * as a permanent SAS datasets to the target libref.
6          *---------------------------------------------------------------*;
7          %include 'common.sas';
15         
16         %common
NOTE: Libref SOURCE was successfully assigned as follows: 
      Engine:        V9 
      Physical Name: C:\Apache\htdocs\casper2\home\Examples\SAS\CDISC\prog\chapter03
NOTE: Libref LIBRARY refers to the same physical library as SOURCE.
NOTE: Libref LIBRARY was successfully assigned as follows: 
      Engine:        V9 
      Physical Name: C:\Apache\htdocs\casper2\home\Examples\SAS\CDISC\prog\chapter03
NOTE: Libref TARGET was successfully assigned as follows: 
      Engine:        V9 
      Physical Name: C:\Apache\htdocs\casper2\home\Examples\SAS\CDISC\sdtm
17         
18         **** CREATE EMPTY EX DATASET CALLED EMPTY_EX;
19         %include 'make_empty_dataset.sas';
101        
102        %make_empty_dataset(metadatafile=..\appendix_b\SDTM_METADATA.xlsx,dataset=EX)

NOTE: The import data set has 128 observations and 16 variables.
NOTE: WORK._TEMP data set was successfully created.
NOTE: PROCEDURE IMPORT used (Total process time):
      real time           0.01 seconds
2 The SAS System                                                                                                                                                                                                                  10:26 Sunday, December 6, 2015

      cpu time            0.01 seconds
      


NOTE: There were 13 observations read from the data set WORK._TEMP.
      WHERE domain='EX';
NOTE: The data set WORK._TEMP has 13 observations and 16 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      


NOTE: There were 13 observations read from the data set WORK._TEMP.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      


NOTE: The data set WORK.EMPTY_EX has 0 observations and 13 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

103        
104        %include 'make_dtc_date.sas';
155        
156        **** DERIVE THE MAJORITY OF SDTM EX VARIABLES;
157        options missing = ' ';
158        data ex;
159          set EMPTY_EX
160              source.dosing;
161        
162            studyid = 'XYZ123';
163            domain = 'EX';
164            usubjid = left(uniqueid);
165            exdose = dailydose;
166            exdostot = dailydose;
167            exdosu = 'mg';
168            exdosfrm = 'TABLET, COATED';
169            %make_dtc_date(dtcdate=exstdtc, year=startyy, month=startmm, day=startdd)
170            %make_dtc_date(dtcdate=exendtc, year=endyy, month=endmm, day=enddd)
171        run;

NOTE: There were 0 observations read from the data set WORK.EMPTY_EX.
NOTE: There were 84 observations read from the data set SOURCE.DOSING.
NOTE: The data set WORK.EX has 84 observations and 24 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      
3 The SAS System                                                                                                                                                                                                                  10:26 Sunday, December 6, 2015


172        
173        proc sort
174          data=ex;
175            by usubjid;
176        run;

NOTE: There were 84 observations read from the data set WORK.EX.
NOTE: The data set WORK.EX has 84 observations and 24 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
      

177        
178        **** CREATE SDTM STUDYDAY VARIABLES AND INSERT EXTRT;
179        %include 'make_sdtm_dy.sas';
207        
208        data ex;
209          merge ex(in=inex) target.dm(keep=usubjid rfstdtc arm);
210            by usubjid;
211        
212            if inex;
213        
214            %make_sdtm_dy(date=exstdtc);
215            %make_sdtm_dy(date=exendtc);
216        
217            **** in this simplistic case all subjects received the treatment they were randomized to;
218            extrt = arm;
219        run;

NOTE: There were 84 observations read from the data set WORK.EX.
NOTE: There were 60 observations read from the data set TARGET.DM.
NOTE: The data set WORK.EX has 84 observations and 26 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

220        
221        
222        **** CREATE SEQ VARIABLE;
223        proc sort
224          data=ex;
225            by studyid usubjid extrt exstdtc;
226        run;

NOTE: There were 84 observations read from the data set WORK.EX.
NOTE: The data set WORK.EX has 84 observations and 26 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      
4 The SAS System                                                                                                                                                                                                                  10:26 Sunday, December 6, 2015


227        
228        data ex;
229          retain &EXKEEPSTRING;
230          set ex(drop=exseq);
231            by studyid usubjid extrt exstdtc;
232        
233            if not (first.exstdtc and last.exstdtc) then
234              put "WARN" "ING: key variables do not define an unique record. " usubjid=;
235        
236            retain exseq;
237            if first.usubjid then
238              exseq = 1;
239            else
240              exseq = exseq + 1;
241        		
242            label exseq = "Sequence Number";
243        run;

NOTE: There were 84 observations read from the data set WORK.EX.
NOTE: The data set WORK.EX has 84 observations and 26 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
      

244        
245        
246        **** SORT EX ACCORDING TO METADATA AND SAVE PERMANENT DATASET;
247        %include 'make_sort_order.sas';
279        
280        %make_sort_order(metadatafile=..\appendix_b\SDTM_METADATA.xlsx,dataset=EX)

NOTE: The import data set has 11 observations and 10 variables.
NOTE: WORK._TEMP data set was successfully created.
NOTE: PROCEDURE IMPORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      


NOTE: There were 1 observations read from the data set WORK._TEMP.
      WHERE name='EX';
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

281        
282        proc sort
283          data=ex(keep = &EXKEEPSTRING)
284          out=target.ex;
285            by &EXSORTSTRING;
5 The SAS System                                                                                                                                                                                                                  10:26 Sunday, December 6, 2015

286        run;

NOTE: There were 84 observations read from the data set WORK.EX.
NOTE: The data set TARGET.EX has 84 observations and 13 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

NOTE: SAS Institute Inc., SAS Campus Drive, Cary, NC USA 27513-2414
NOTE: The SAS System used:
      real time           0.35 seconds
      cpu time            0.14 seconds
      
